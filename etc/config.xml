<?xml version="1.0"?>
<config>
   <modules>
      <Metrof_FBConnect>
         <version>0.0.2</version>
         <depends>
            <Mage_Customer />
         </depends>
      </Metrof_FBConnect>
   </modules>

   <global>
   <blocks>
	<madetoorder><class>Metrof_FBConnect_Block</class></madetoorder>
	<catalog>
		<rewrite>
			<product_list>Metrof_FBConnect_Block_Product_List</product_list>
			<product_view>Metrof_FBConnect_Block_Product_View</product_view>
		</rewrite> 
	</catalog>
   </blocks>

	<resources>
		<madetoorder_setup>
			<setup>
				<module>Metrof_FBConnect</module>
			</setup>
			<connection>
				<use>core_setup</use>
			</connection>
		</madetoorder_setup>
	</resources>

        <models>
            <madetoorder><class>Metrof_FBConnect_Model</class></madetoorder>
            <catalog>
                <rewrite>
                <product>Metrof_FBConnect_Model_Product</product>
                </rewrite> 
            </catalog>
			<!--
            <catalog>
                <rewrite>
                <product_type_abstract>Metrof_FBConnect_Model_Product_TypeAbstract</product>
                </rewrite> 
            </catalog>
			-->
            <sales>
                <rewrite>
                   <quote>Metrof_FBConnect_Model_Sales_Quote</quote>
                </rewrite> 
            </sales>
            <checkout>
                <rewrite>
                    <cart>Metrof_FBConnect_Model_Cart</cart>
                </rewrite> 
            </checkout>
<!--
            <core>
                <rewrite>
                    <abstract>Metrof_FBConnect_Model_Abstract</abstract>
                </rewrite> 
            </core>
-->
        </models>

    <helpers>
        <madetoorder>
            <class>Metrof_FBConnect_Helper</class>
        </madetoorder>
    </helpers>
    </global>

    <frontend>
     <layout>
          <updates>
              <madetoorder>
                  <file>madetoorder.xml</file>
              </madetoorder>
          </updates>
     </layout>

        <events>
			<checkout_cart_product_add_after>
            <observers>
              <my_cart_product_checker>
                <type>object</type>
                <class>Metrof_FBConnect_Helper_Event</class>
                <method>attachSpecialQuoteAttribs</method>
              </my_cart_product_checker>
            </observers>
			</checkout_cart_product_add_after>
          <sales_convert_quote_item_to_order_item>
            <observers>
              <my_cart_checker>
                <type>object</type>
                <class>Metrof_FBConnect_Helper_Event</class>
                <method>attachSpecialOrderAttribs</method>
              </my_cart_checker>
            </observers>
          </sales_convert_quote_item_to_order_item>
	  <checkout_cart_before_add>
            <observers>
              <madetoorder>
                <type>object</type>
                <class>Metrof_FBConnect_Helper_Event</class>
                <method>attachSpecialQuoteAttribs</method>
              </madetoorder>
            </observers>
	  </checkout_cart_before_add>
          <sales_quote_save_before>
            <observers>
              <my_cart_checker>
                <type>object</type>
                <class>Metrof_FBConnect_Helper_Event</class>
                <method>cartBeforeSave</method>
              </my_cart_checker>
            </observers>
          </sales_quote_save_before>
          <sales_quote_save_after>
            <observers>
              <my_cart_checker>
                <type>object</type>
                <class>Metrof_FBConnect_Helper_Event</class>
                <method>cartAfterSave</method>
              </my_cart_checker>
            </observers>
          </sales_quote_save_after>
          <checkout_cart_update_items_after>
            <observers>
              <fbc_qty_updater>
                <type>object</type>
                <class>Metrof_FBConnect_Helper_Event</class>
                <method>cartAfterUpdate</method>
              </fbc_qty_updater>
            </observers>
          </checkout_cart_update_items_after>
        </events>

        <routers>
            <madetoorder>
                <use>standard</use>
                <args>
					<module>Metrof_FBConnect</module>
                    <frontName>fbc</frontName>
                </args>
            </madetoorder>
        </routers>
    </frontend>

	<default>
		<!--
		<mto>
			<measurement_class><metric>no</metric></measurement_class>
			<measurement_class><metric_use_mm>no</metric_use_mm></measurement_class>
			<mto_field_1>
				<field_name>mto_width</field_name>
				<field_type>range</field_type>
				<use_as_dimension>width</use_as_dimension>
			</mto_field_1>
			<mto_field_2>
				<field_name>mto_height</field_name>
				<field_type>range</field_type>
				<use_as_dimension>height</use_as_dimension>
			</mto_field_2>
			<mto_field_3>
				<field_name>mto_depth</field_name>
				<field_type>range</field_type>
				<use_as_dimension>depth</use_as_dimension>
			</mto_field_3>
			<mto_field_4>
				<field_name></field_name>
				<field_type>disabled</field_type>
				<use_as_dimension>none</use_as_dimension>
			</mto_field_4>
			<mto_field_5>
				<field_name></field_name>
				<field_type>disabled</field_type>
				<use_as_dimension>none</use_as_dimension>
			</mto_field_5>
		</mto>
		-->
	</default>


    <adminhtml>
        <acl>
            <resources>
                <admin>
                    <children>
                        <system>
                            <children>
                                <config>
                                    <children>
                                        <metrof_fbc>
                                            <title>Facebook Connect Section</title>
                                            <sort_order>20</sort_order>
                                        </metrof_fbc>
									</children>
								</config>
							</children>
						</system>
					</children>
				</admin>
			</resources>
		</acl>
		<layout>
			<updates>
				<madetoorder>
					<file>madetoorder.xml</file>
				</madetoorder>
			</updates>
		</layout>
	</adminhtml>
</config>
